<addon id="plugin.video.archivo2tv" name="Sledování O2TV" provider-name="waladir" version="2.1.0">
  <extension library="main.py" point="xbmc.python.pluginsource">
    <provides>video</provides>
  </extension>
  <extension library="iptv_sc_epg.py" point="xbmc.service"/>
  <extension point="kodi.context.item">
    <menu id="kodi.core.main">
      <item library="iptv_sc_rec.py">
          <label>Uložit jako nahrávku na O2TV</label>
          <visible>
            Window.IsActive(10702)
          </visible>
      </item> 
      <item library="iptv_sc_dwn.py">
          <label>Stáhnout</label>
          <visible>
            Window.IsActive(10702)
          </visible>
      </item>
      <item library="iptv_sc.py">
          <label>Spustit ve Sledování O2TV</label>
          <visible>
            Window.IsActive(10702)
          </visible>
      </item>
    </menu>         
  </extension>   
  <extension point="xbmc.addon.metadata">
    <summary lang="en_GB">Sledování O2TV</summary>
    <summary lang="cs_CZ">Sledování O2TV</summary>
    <description lang="en_GB">
Umožnuje sledování O2TV, včetně základní práce s nahrávkami a IPTV SC
Poděkování:
* manželce (aneb cherchez la femme) a Sorosovi za inspiraci
* djlucasovi za nápad s EPG v IPTV Simple Clientovi a pomoc s realizací
* všem kdo doplňek používají, pomáhají s odhalováním chyb a zásobují mě náměty
* listenerovi za poskytnutí kódu
Další informace a podporu najdete na fóru www.xbmc-kodi.cz (https://www.xbmc-kodi.cz/prispevek-zpetne-sledovani-o2tv-ott)
   </description>
    <description lang="cs_CZ">
Umožnuje sledování O2TV, včetně základní práce s nahrávkami a IPTV SC
Poděkování:
* manželce (aneb cherchez la femme) a Sorosovi za inspiraci
* djlucasovi za nápad s EPG v IPTV Simple Clientovi a pomoc s realizací
* všem kdo doplňek používají, pomáhají s odhalováním chyb a zásobují mě náměty
Další informace a podporu najdete na fóru www.xbmc-kodi.cz (https://www.xbmc-kodi.cz/prispevek-zpetne-sledovani-o2tv-ott)
    </description>
    <platform>all</platform>
    <source>https://github.com/waladir/plugin.video.archivo2tv</source>
    <news>
v2.1.0 (2020-11-23)
- vypnutí dotahování chybějících detailů k pořadům

v2.0.9 (2020-11-04)
- parsování datumu z IPTV Simple Clienta (velké díky listenerovi)
    
v2.0.8 (2020-10-18)
- úprava titulku při přehrávání přes playlist z IPTVSC
- omezení kontextového menu jen pro PVR EPG

v2.0.7 (2020-10-10)    
- filtrování kanálů bez streamu
- přidané mazání položek v historii vyhledávání do kontextového menu
- oprava problémů v Kodi 19 (Matrix)

v2.0.6 (2020-10-04)
- oprava zobrazení nahrávek při chybějícím EPG
- přejmenování vypnutí informačních hlášek v nastavení

v2.0.5 (2020-10-04)
- oprava vypnutí zobrazování informačních hlášek o práci s EPG (stahování/generování)

v2.0.4 (2020-09-30)
- ošetření redirectu streamu na https, pokud O2 vrátí URL s http protokolem

v2.0.3 (2020-09-27)
- přidání kontroly session před začátkem stahování EPG 
- přidání informačních hlášek o průběhu stahování EPG
- přidání možnosti vypnout v nastavení informační hlášky z procesů běžících na pozadí (generování EPG pro IPTV Simple Clienta, stahování EPG)
- posun začátku stahování EPG z 30 na 60 s po startu kodi
- snížení pauz v cyklu plánovače
- přidané stažení EPG dat před generováním EPG v nastavení
- možnost v nastavení vypnout procesy běžící na pozadí (stahování EPG z O2, stahování streamů, generování EPG pri IPTV Simple Clienta)
- oprava spouštění v historii kanálů IPTV Simple Clienta
- oprava přehrávání živého vysílání bez EPG dat

v2.0.2 (2020-09-20)
- oprava přehrávání kanálů pro dospělé
- ošetření chyb při stahování EPG 
- při generování EPG v nastavení se nebude spouštět stahování EPG z O2
- přidané detailní logování průběhu stahování EPG do kodi.log (se zapnutým debugem)

v2.0.1 (2020-09-05)
- aktualizace změn v EPG při změnách na straně O2
- doplnění položek Související pořady a Vysílání pořadu do kontextového menu ve výsledcích vyhledávání

v2.0.0 (2020-08-31)
- skrytí položky stahování v kontextovém menu, pokud není povolené v nastavení
- oprava nefunkčního přehrávání ve výsledcích vyhledávání
- kompatibilita s Kodi 19 (Python 3)
 
v1.9.1 (2020-08-23)
- úprava třídění podle abecedy v kategoriích
- při vyhledání stejných pořadů se nezobrazují budoucí pořady
- podpora stahování pořadů 

v1.9.0 (2020-08-15)
- ukládání kategorií O2 s aktualizací jednou za 24 hodin
- využití EPG DB k plánování nahrávek a získání informací o pořadech při přehrávání streamu
- odstranění zbývajících přímých volání API O2 (mimo nahrávek, vyhledávání a URL streamu)
- odstraněna možnost použití EPG DB v nastavení, bude se používat vždy mimo vyhledávání a kategorie
- zmenšená prodleva při ukončení Kodi/doplňku
- u live, archivních pořadů a pořadů v kategoriích přidáno do kontextového menu vyhledání souvisejících a stejných pořadů
- opravena chyba v nahrávkách, pokud žádná neexistovala

v1.8.6 (2020-08-09)
- oprava plnění DB

v1.8.5 (2020-08-08)
- z nastavení jsou odstraněné volby pro zobrazení detailů a posteru k pořadům, budou se zobrazovat vždy a pořetnů pro generování EPG, které bude vždy 8/8
- interní rozšíření škály ratingu z 0-10 na 0-100, v EPG pak rozšíření na jedno desetinné číslo.
- do EPG DB přidané informace o seriálech (sezóna, episoda), doplněné i do generování EPG pro IPTV Simple Clienta
- upravená údržba EPG DB - mažou se data u pořadů, které nejsou k dispozici, tj. starší než 7 dnů, mimo dat k nahrávkám

v1.8.4 (2020-08-02)
- oprava chyby při přehrávání v kategoriích

v1.8.3 (2020-07-30)
- oprava chyby při přehrávání živého vysílání v IPTV Simple Clientovi

v1.8.2 (2020-07-29)
- oprava přehrávání Fishing and Hunting v IPTV Simple Clientovi
- vypnutí kešovaní nabídek v archivu
- v archivu se zobrazují všechny pořady, které lze přehrát
- doplnění alternativního popisu a posteru, pokud nejsou dostupné standardní
- přechod na interní EPG u nahrávek a u načítání seznamů u archivu a živého vysílání
- opravena chyba, kdy při povoleném přidávání nových kanálů docházelo k přidání všech kanálů. Dojde i k opravení dat.
- ošetření kanálů, které jsou v seznamu kanálů, ale chybí k nim detailní informace 
- omezení počtu dnů při generování EPG pro IPTV Simple Clienta na 8 dnů zpátky

v1.8.1 (2020-07-27)
- předělaná práce s kanály, lokální ukládání dat o kanálech, aktualizace jednou za 24 hodin
- možnost v ruční editaci přidat (položka menu) nebo odstranit (kontextové menu) kanál
- přidáno varování s možností změny nastavení pokud při ruční editaci nebo načtení seznamu z O2 je zapnuté automatické přidávání kanálu
- přepsání generování EPG pro IPTV Simple Clienta
- přidání lokální databáze EPG, s automatickou aktualizací dat
- načítání detailů u pořadech z EPG DB 
- možnost vypnutí použití EPG DB v nastavení (defaultně zapnuto)
- přidána možnost použít v playlistu pro IPTV Simple Clienta čísla kanálů z doplňku
    
v1.7.2 (2020-07-19)
- přidané uložení O2 session s platností jeden den a automatickou aktualizací
- přidaná možnost manuálního vygenrování nové O2 session v nastavení
- ve vyhledávání se nově zobrazují ve výsledcích jen pořady z aktuálního seznamu kanálů
- přidané zobrazení pořadů z archivu podle kategorií

v1.7.1 (2020-07-10)
- přidaná možnost v nastavení vypnout spouštění pořadu přepnutím na kanál v EPG IPTV Simple Clienta (funguje pak přepínaní během přehrávání pořadu)
- oprava chyby, kdy v archivu chyběly pořady, které začínaly před půlnocí a končily až druhý den
- doplněné ikony k položkám hlavního menu
- počet dní zobrazovaných pro archiv nebo pro nastavení nahrávek a maximální počty dní pro generování EPG byly rozšířené z původních 7 na 10 dnů
- optimalizovaná funkce na dotahování detailních informacím o pořadu a jejich rozšíření o rok a zemi vzniku, originální název, žánry a ID v IMDB
- rozšířené data v EPG o obsazení a režiséry, zemi a rok vzniku, žánry a hodnocení
- oprava chyby při mazání nahrávek
- doplnění odkazu na fórum do informací o doplňku

v1.7.0 (2020-07-05)
- přidaná podpora přetáčení u živých pořadů s MPEG-DASH/MPEG-DASH-web (lze vypnout v nastavení)    
- přidané zobrazení polohy v nabídkách (musí podporovat použité téma)
- rozdělení kódu do modulů
- oprava drobných chyb
- přehrávání pořadu v EPG IPTV Simple Clienta při Přepnout na kanál (funguje i u pořadů z archivu)
- pokud v IPTV Simple Clientovi chybí EPG, spustí se live stream (končilo chybou)
- oprava generování playlistu pro omezenou skupinu kanálů
- v nastavení přidaná možnost vybrat jinou O2 službu než první
- nahrazení speciálních znaků v EPG za html entity, odstraňuje problém s importem EPG IPTV Simple Clientem

v1.6.3 (2020-06-27)
- opraveno přehrávání aktuálně běžícího pořadu z IPTV Simple Clienta s nastaveným MPEG-DASH-web streamem
    
v1.6.2 (2020-06-27)
- opravena defaultní barva popisku u živého vysílání
- přidání informací o hercích a režisérech
- stránkování kanálů u živého vysílání
- úprava vracení streamu pro IPTV Simple Clienta, aby se aktualizovaly nedávno sledované kanály
    
v1.6.1 (2020-06-21)
- přidáno nastavení barvy popisku u živého vysílání
    
v1.6.0 (2020-06-14)
- přidání kontextového menu do PVR klienta umožnujující přehrávání a nastavení nahrávek u O2 (vyžaduje shodné pojmenování kanálů, ideálně použít EPG Z doplňku)
- do EPG doplňeno stahování detailních informací o pořadech, pokud jsou k dispozici
    
v1.5.3 (2020-06-11)
- přidané generování EPG v XMLTV pro IPTV Simple Clienta
- generování EPG je možné pouštět automaticky při startu Kodi a následně v nastavitelném intervalu
    
v1.5.2 (2020-06-09)
- oddělení nastavení streamu do samostatné záložky
- možnost nastavit dotaz z výběrem HD/SD při spuštění streamu (funguje u HLS streamu a nesmí být zaškrtlé Pouze SD)
- opravené spouštění živého vysílání z IPTV Simple Clienta + přidání informací o pořadu včetně loga
- úprava barvy titulku u živého vysílání

v1.5.1 (2020-06-07)
- aktualizace seznamu živého vysílání po ukončení přehrávání (pokud není zapnutné načítání detailů) 
- optimalizace kódu
   
v1.5.0 (2020-06-04)
- upravené jméno doplňku u chybových hlášek
- přidaná možnost v nastavení měnit typ streamu mezi HLS, a adaptivní MPEG-DASH (až 1080p) a MPEG-DASH-web (až 720p). MPEG-DASH vyžaduje nainstalovaný InputStream Adaptive, v kterém lze nastavit i podmínky pro výběr streamu.
- přepracované menu, u plánování nahrávek je výběr po dnech se zobrazením detailů
- u živého vysílání je možné zapnout dotažení detailních informací v nastavení (trvá delší dobu)

v1.4.5 (2020-05-31)
- úprava zobrazení aktuálního pořadí u kanálů
- upravené zdvojování kanálů při načtení uživatelského seznamu

v1.4.4 (2020-05-25)
- oprava načítání uživatelského seznamu kanálů, pokud obsahuje diakritiku
- doplněné mapování ID kanálů z uživatelského seznamu na jméno kanálu
- přidaný aktuální pořad do nabídky kanálů 
    
v1.4.3 (2020-05-23)
- možnost v nastavení zakázat automatické přidávání kanálů, které nejsou v současném seznamu kanálů
    
v1.4.2 (2020-05-20)
- u datumů se zobrazuje den v týdnu 
- oprava načítání uživatelského seznamu kanálů, pokud obsahuje diakritiku
- upravený titulek u položek ve vyhledání (sjednoceno s nahrávkami)
- opravené zobrazení popisu u nahrávek    
    
v1.4.1 (2020-05-18)
- přidání mazání a plánování nahrávek do kontextového menu (c)
- zobrazení budoucího programu pro nastavení nahrávek (zobrazení detailů je možné samostatně zapnout v nastavení, načtení seznamu je ale výrazně pomalejší)
- opravy chyb v nahrávkách 

v1.4.0 (2020-05-16)
- přejmenování addonu
- generovaní device id, pokud není vyplněné
- možnost skrýt položku Pořadí kanálů v menu
- možnost načíst uživatelský seznam kanálů z O2, resetnout celý seznam, oprava chyby v pořadí kanálů
- upravený formát titulku pořadu
- přidáno přehrávání nahrávek
- generování playlistu a streamu pro IPTV Simple Clienta

v1.3.1 (2020-05-15)
- oprava seznamu kanálů u více balíčků
- nastavení historie

v1.3.0 (2020-05-15)
- přechod na jiné API O2
- zrušení závislosti na InputStream Adaptive
- volba SD/HD kvality v nastaveni
- možnost nastavení pokračování pořadu i po jeho skončení podle EPG
- možnost vypnutí zobrazení detailních informace, log a posterů
- doplnění informací k live streamu
- historie vyhledávání
- nastavení pořadí programů

v1.2.3 (2020-05-11)
- přidání do XBMC-Kodi CZ/SK repozitáře

v1.2.0 (2020-05-10)
- přidáno vyhledávání
- zobrazení ratingu
- jméno pořadu u živého streamu
- ošetření chybného přihlášení

v1.1.0 (2020-05-10)
- přidáno živé vysílání

v1.0.2 (2020-05-09)
- přidaná kontrola nastavení, opravené filtrování kanálů podle balíčku O2TV

v1.0.1 (2020-05-09)
- upravené závislosti a opravená možná chyba s kódováním

v1.0.0 (2020-05-07)
- první vydání
    </news>
    <assets>
        <icon>icon.png</icon>
    </assets>
  </extension>
</addon>
